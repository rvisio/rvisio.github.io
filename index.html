<html>
<head>
<meta charset=utf-8 />
<title>DC Census Tracts</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.css' rel='stylesheet' />
 <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
  <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>



<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>
	<div class="container">
	<div id='map' class="map leaflet-container leaflet-fade-anim" style="height:850px; position:relative;"></div>
	<div>


	<script>



		var accessToken = 'pk.eyJ1IjoicnZpc2lvIiwiYSI6ImNpbGZlcWp5dzFyNGd2cm0weHNkYXFmZmkifQ._SdrpHeG4bGCe7ugGJTc2Q';
			// Replace 'mapbox.streets' with your map id.
			var mapboxTiles = L.tileLayer('https://api.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}.png?access_token=' +accessToken, {
		    attribution: '© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'

				});
			var map = L.map('map')
		    .addLayer(mapboxTiles)
		    .setView([38.9071923, -77.0368707], 12);

		$.getJSON("/census.json",function(response){
			console.log(response);
			
		L.geoJson(response, {	
			style: function(feature) {
				return {
					"color": getColor(feature.properties.SQ_MILES),
					"opacity":1,
				};
			},		
			onEachFeature: function (feature, layer) {
				layer.bindPopup("Tract: " + feature.properties.TRACT +"<br/>Square Miles: " + feature.properties.SQ_MILES.toString())
			}
		}).addTo(map);
		})

		function getColor(x) {
			return x < 0     ?    '#bd0026':
         x < .5     ?   '#f03b20':
         x < .75     ?   '#fd8d3c':
         x < 1     ?   '#fecc5c':
                          '#ffffb2' ;
		};



</script>

	</body>

</head>

